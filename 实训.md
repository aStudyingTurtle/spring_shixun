# 后台

>  RABC权限模型

1. 用户表

2. 分角色

3. 根据角色显示菜单

4. 登陆与拦截：查询角色及每个角色分配的菜单

> 用户选择角色，角色选择菜单

## 数据库

> utf8mb4可以处理例如微信授权的用户名表情问题

> id: 自增，主键
>

| 表   | 表名 |
| ---- | ---- |
|用户|user|
|角色|role|
|菜单|menu|
|用户与角色关系表|user_role|
|角色与菜单关系表|row_menu|

### 关系

一对一，一对多(在多中添加1的主键)，多对多(借助中间表)

### 命名规范

数据库中建议使用下划线命名法

java中使用驼峰命名法

vo:给前台展示用的实体类包

### mysql分页

```sql
select * from user limit 从几开始查,查几条
#查第二页，10条(10-19)
select * from user limit 10,10

#统计总数
select count(id) from user #效率高
select count(*) from user #效率低
select count(1) from user #效率更高

#SpringBoot分页
#使用 PageHelper插件，在查询语句上添加（需紧挨着）
PageHelper.startPage(页码,每页几条);
```

### Mapper查询注解

```java
@Select("SELECT * from user where username like '%${keyword}%'")

```





## spring boot

![image-20211227152541077](C:\Users\lijia\AppData\Roaming\Typora\typora-user-images\image-20211227152541077.png)

### 链接数据库四大参数

> 用户名，密码，url，驱动

```java
spring.datasource.url=jdbc:mysql://127.0.0.1:3306/shixun1
spring.datasource.username=root
spring.datasource.password=rootroot
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver //连接mysql8
//mysql5 com.mysql.jdbc.Driver
```

### 端口号

```java
server.port=8080
```

#### 请求接受

Spring一个serverlet统一接受请求

然受转发给controller

### 请求方式

> get
>
> post
>
> delete
>
> put
>
> patch
>
> ......

### controller注解

```java
/*
类需要加
@Controller
@RequestMapping(value = "/user", method = RequestMethod.GET)

*/
@RequestMapping("/user")
@GetMapping("/user")
@PostMapping("/user")
//或者
@RequestMapping(value = "/index", method = RequestMethod.GET)
```

> controller只处理请求，具体活由service干

```java
//Response有时会不返回页面
@ResponseBody//不返回页面，只返回json数据
```

### starter

启动器

为某个包提供默认配置

## 前端

### jquery示例

```sql
layui.use(['table',], function () {
    var table = layui.table;
    //使用jquery
    var $ = layui.jquery;
    //给查询按钮绑定事件
    $("#searchBtn").on("click", function () {
        table.render({
            elem: '#userTable' //# + 元素id
            // ,height: 312
            , url: '/user/list' //数据接口
            , page: true //开启分页
            , cols: [[ //表头   双括号会被解析为thymeleaf模板
                {field: 'id', title: 'ID', width: '20%', sort: true, fixed: 'left'}
                , {field: 'username', title: '用户名', width: '20%'}
                , {field: 'sex', title: '性别', width: '20%', sort: true}
                , {field: 'name', title: '姓名', width: '20%', sort: true}
                , {field: 'age', title: '年龄', width: '20%', sort: true}
            ]],
            limits: [5, 10, 15, 20],
            limit: 5,
            where: {"keyword": $("#searchUsername").val()}
        });
    }).click();
})
```



# 进销存（小型ERP）

筛选部分表：

商店表

商品表

仓库表

库存管理（进销存、定时任务）

时间来得及增加业务